import{a as U,g as q,r as g,u as A,k as _,l as J,j as t,s as K,d as B,e as X,B as Y,n as Z,m as D,o as $,p as ee,h as te,q as ae,i as se,y as ne,c as W,v as O,T as j,I as F}from"./index-C5dV5vcY.js";import{G as u}from"./Grid-CT4pOQnw.js";import{C as N,a as P}from"./CardMedia-C8Eologs.js";import{L as R,F as L,I as T,S as V}from"./Select-C6aeAHCV.js";import{l as E}from"./listItemTextClasses-fZQGBs6a.js";import{d as G}from"./dividerClasses-DRX4zGyV.js";import{B as oe}from"./Button-Blrz6v6M.js";const H=U("MuiListItemIcon",["root","alignItemsFlexStart"]);function ie(e){return q("MuiMenuItem",e)}const I=U("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),re=(e,a)=>{const{ownerState:i}=e;return[a.root,i.dense&&a.dense,i.divider&&a.divider,!i.disableGutters&&a.gutters]},le=e=>{const{disabled:a,dense:i,divider:s,disableGutters:m,selected:x,classes:c}=e,d=X({root:["root",i&&"dense",a&&"disabled",!m&&"gutters",s&&"divider",x&&"selected"]},ie,c);return{...c,...d}},ce=K(Y,{shouldForwardProp:e=>Z(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:re})(D(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:$(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${I.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:$(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${I.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:$(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:$(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${I.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${I.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${G.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${G.inset}`]:{marginLeft:52},[`& .${E.root}`]:{marginTop:0,marginBottom:0},[`& .${E.inset}`]:{paddingLeft:36},[`& .${H.root}`]:{minWidth:36},variants:[{props:({ownerState:a})=>!a.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:a})=>a.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:a})=>!a.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:a})=>a.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${H.root} svg`]:{fontSize:"1.25rem"}}}]}))),Q=g.forwardRef(function(a,i){const s=A({props:a,name:"MuiMenuItem"}),{autoFocus:m=!1,component:x="li",dense:c=!1,divider:h=!1,disableGutters:d=!1,focusVisibleClassName:b,role:y="menuitem",tabIndex:p,className:f,...o}=s,C=g.useContext(R),k=g.useMemo(()=>({dense:c||C.dense||!1,disableGutters:d}),[C.dense,c,d]),S=g.useRef(null);_(()=>{m&&S.current&&S.current.focus()},[m]);const w={...s,dense:k.dense,divider:h,disableGutters:d},n=le(s),r=J(S,i);let l;return s.disabled||(l=p!==void 0?p:-1),t.jsx(R.Provider,{value:k,children:t.jsx(ce,{ref:r,role:y,tabIndex:l,component:x,focusVisibleClassName:B(n.focusVisible,b),className:B(n.root,f),...o,ownerState:w,classes:n})})}),de=()=>{const[e,a]=g.useState({}),[i,s]=g.useState(""),[m,x]=g.useState(""),[c,h]=g.useState(1),{fetchUser:d}=ee(),{getProductDetais:b,addToCart:y}=te(),{id:p}=ae(),f=se(),o=async()=>{var n,r,l,z;try{let v=await b(p);if((n=v==null?void 0:v.data)!=null&&n.result){const M=(r=v==null?void 0:v.data)==null?void 0:r.result;a(M),s(((l=M.colors)==null?void 0:l[0])||""),x(((z=M.sizes)==null?void 0:z[0])||""),h(1)}}catch(v){console.log("Error fetching product:",v)}};return g.useEffect(()=>{p&&o()},[p]),{productDetails:e,selectedColor:i,selectedSize:m,quantity:c,handleColorChange:n=>{s(n.target.value)},handleSizeChange:n=>{x(n.target.value)},handleQuantityChange:n=>{const r=Number(n.target.value);r>=1&&r<=e.stock&&h(r)},buyNow:async n=>{var r;try{let l=await y(n);((r=l==null?void 0:l.data)==null?void 0:r.responseCode)===200&&(await d(),ne.success("Item added to cart"),f("/checkout"))}catch(l){console.log(l)}}}},ue=W(t.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),pe=W(t.jsx("path",{d:"M19 13H5v-2h14z"}));function fe(){var d,b,y,p,f;const{productDetails:e,selectedColor:a,selectedSize:i,quantity:s,handleColorChange:m,handleSizeChange:x,handleQuantityChange:c,buyNow:h}=de();return t.jsxs(u,{container:!0,spacing:4,padding:4,children:[t.jsxs(u,{item:!0,xs:12,md:6,children:[t.jsx(N,{children:t.jsx(P,{component:"img",height:"400",image:(d=e==null?void 0:e.images)==null?void 0:d[0],alt:e==null?void 0:e.title,sx:{objectFit:"contain"}})}),t.jsx(O,{display:"flex",gap:2,mt:2,children:e&&((b=e==null?void 0:e.images)==null?void 0:b.map((o,C)=>t.jsx(N,{sx:{width:80,cursor:"pointer"},children:t.jsx(P,{component:"img",height:"80",image:o,alt:`${e==null?void 0:e.title} ${C}`,sx:{objectFit:"contain"}})},C)))})]}),t.jsxs(u,{item:!0,xs:12,md:6,container:!0,direction:"column",spacing:3,children:[t.jsxs(u,{item:!0,children:[t.jsx(j,{variant:"h4",fontWeight:"bold",children:e.title}),t.jsx(j,{variant:"body1",color:"text.secondary",mt:1,children:e.description})]}),t.jsx(u,{item:!0,children:t.jsxs(j,{variant:"h5",color:"primary",fontWeight:"bold",children:["â‚¹ ",(y=e==null?void 0:e.price)==null?void 0:y.toFixed(2)]})}),t.jsxs(u,{item:!0,container:!0,spacing:2,alignItems:"center",children:[t.jsx(u,{item:!0,xs:6,children:t.jsxs(L,{fullWidth:!0,children:[t.jsx(T,{id:"color-select-label",children:"Color"}),t.jsx(V,{labelId:"color-select-label",value:a,label:"Color",onChange:m,children:e&&((p=e==null?void 0:e.colors)==null?void 0:p.map(o=>t.jsx(Q,{value:o,children:o},o)))})]})}),t.jsx(u,{item:!0,xs:6,children:t.jsxs(L,{fullWidth:!0,children:[t.jsx(T,{id:"size-select-label",children:"Variant"}),t.jsx(V,{labelId:"size-select-label",value:i,label:"Size",onChange:x,children:(f=e==null?void 0:e.sizes)==null?void 0:f.map(o=>t.jsx(Q,{value:o,children:o},o))})]})})]}),t.jsxs(u,{item:!0,xs:6,children:[t.jsxs(O,{display:"flex",alignItems:"center",children:[t.jsx(j,{variant:"subtitle1",mr:2,children:"Quantity:"}),t.jsx(F,{onClick:()=>c({target:{value:s-1}}),disabled:s<=1,children:t.jsx(pe,{})}),t.jsx(j,{children:s}),t.jsx(F,{onClick:()=>c({target:{value:s+1}}),disabled:s>=(e==null?void 0:e.stock),children:t.jsx(ue,{})})]}),t.jsxs(j,{variant:"caption",color:"text.secondary",mt:1,children:["Stock available: ",e==null?void 0:e.stock]})]}),t.jsx(u,{item:!0,xs:12,children:t.jsx(oe,{variant:"contained",size:"large",color:"primary",onClick:()=>h({inventories:[{inventoryId:e._id,quantity:s,variant:i,color:a}]}),disabled:(e==null?void 0:e.stock)===0,children:"Buy Now"})})]})]})}export{fe as default};
